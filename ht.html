<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CertiVerify AI | EventEye Automation System</title>
    <!-- Link to Google Fonts for professional typography -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">
    <!-- Link to Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /*
        * Color Palette:
        * Primary/Tech Blue: #007bff (Efficiency, Trust)
        * Accent Green: #28a745 (Success, Delivered)
        * Backgrounds: #f4f7f9 (Light Gray), #ffffff (White)
        * Text: #343a40 (Dark Gray)
        */

        /* GLOBAL STYLES & RESET */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            color: #343a40;
            line-height: 1.6;
            background-color: #ffffff;
        }

        h1, h2, h3 {
            font-weight: 700;
            line-height: 1.2;
        }

        section {
            padding: 80px 5%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* BUTTON STYLES (CTA) */
        .cta-button {
            background-color: #007bff; /* Primary Blue */
            color: white;
            padding: 14px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.0rem;
            font-weight: 700;
            cursor: pointer;
            letter-spacing: 0.5px;
            transition: background-color 0.3s ease, transform 0.2s;
        }

        .cta-button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        /* 1. NAVIGATION BAR */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 5%;
            max-width: 1200px;
            margin: 0 auto;
            border-bottom: 1px solid #e9ecef;
        }

        .logo {
            font-size: 2.0rem;
            font-weight: 900;
            color: #007bff;
        }

        .navbar nav a {
            margin-left: 30px;
            text-decoration: none;
            color: #343a40;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .navbar nav a:hover {
            color: #007bff;
        }

        /* 2. HERO SECTION */
        .hero-section {
            display: flex;
            align-items: center;
            gap: 60px;
            padding-top: 100px;
            padding-bottom: 100px;
        }

        .hero-content {
            flex: 1.2;
        }

        .hero-content h1 {
            font-size: 3.2rem;
            margin-bottom: 20px;
        }

        .hero-content p {
            font-size: 1.3rem;
            color: #6c757d;
            margin-bottom: 40px;
        }

        .hero-visual {
            flex: 1;
            display: flex;
            justify-content: center;
        }

        .mockup-placeholder {
            width: 450px;
            height: 300px;
            background-color: #e9ecef;
            border: 5px solid #007bff;
            border-radius: 10px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9rem;
            color: #6c757d;
            text-align: center;
        }

        /* 3. PROBLEM STATEMENT */
        .problem-section {
            background-color: #f4f7f9;
            text-align: center;
        }

        .problem-section h2 {
            font-size: 2.2rem;
            margin-bottom: 40px;
        }

        .challenge-card {
            background-color: #f8d7da;
            color: #721c24;
            padding: 30px 40px;
            border-radius: 8px;
            max-width: 800px;
            margin: 0 auto;
            border: 1px solid #f5c6cb;
        }

        .challenge-card i {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #dc3545;
        }

        .challenge-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #721c24;
        }

        /* 4. SOLUTION & CORE FEATURES */
        .solution-section {
            text-align: center;
        }

        .solution-section h2 {
            font-size: 2.2rem;
            margin-bottom: 60px;
            color: #007bff;
        }

        .feature-grid {
            display: flex;
            justify-content: space-between;
            gap: 30px;
        }

        /* Feature Card Styles (Now applied to <a> tag) */
        .feature-card {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            flex: 1;
            text-align: center;
            text-decoration: none; /* Remove underline from link */
            color: inherit; /* Inherit text color */
            transition: all 0.3s ease; /* Smooth transition for hover effects */
            display: block; /* Make the link take the full card size */
        }

        .feature-card:hover {
            box-shadow: 0 8px 30px rgba(0, 123, 255, 0.2); /* Blue shadow on hover */
            transform: translateY(-5px); /* Lift card slightly */
            border-color: #007bff;
        }

        .feature-card i {
            font-size: 3rem;
            color: #007bff;
            margin-bottom: 15px;
        }

        .accent-card i {
            color: #28a745;
        }

        .feature-card h3 {
            margin-bottom: 10px;
            font-size: 1.4rem;
        }

        /* 5. TRACKING DASHBOARD */
        .dashboard-section {
            background-color: #f4f7f9;
            display: flex;
            align-items: center;
            gap: 60px;
        }

        .dashboard-content {
            flex: 1;
        }

        .dashboard-content h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
        }

        .dashboard-content p {
            font-size: 1.1rem;
            color: #6c757d;
            margin-bottom: 30px;
        }

        .status-list {
            list-style: none;
            padding-left: 0;
            font-size: 1.1rem;
        }

        .status-list li {
            margin-bottom: 15px;
            text-align: left;
        }

        .status-list i {
            font-size: 1.2rem;
            margin-right: 10px;
        }

        .delivered { color: #28a745; }
        .pending { color: #ffc107; }
        .bounced { color: #dc3545; }

        .dashboard-visual {
            flex: 1.3;
        }

        .detail-view {
            height: 400px;
            border: 8px solid #343a40;
            background-color: #ffffff;
            color: #343a40;
        }

        /* 6. FOOTER */
        .footer {
            background-color: #343a40;
            color: white;
            padding: 50px 5%;
            text-align: center;
        }

        .footer-cta-container {
            padding-bottom: 30px;
            margin-bottom: 20px;
        }

        .footer-cta-container h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .footer-cta-container p {
            margin-bottom: 25px;
            font-size: 1.1rem;
            color: #adb5bd;
        }

        .copyright {
            font-size: 0.9rem;
            color: #adb5bd;
        }

        /* --- CHATBOT STYLES --- */
        #chatbot-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #28a745; /* Accent Green */
            color: white;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            font-size: 1.8rem;
            cursor: pointer;
            z-index: 1000;
            transition: background-color 0.3s ease, transform 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #chatbot-toggle:hover {
            background-color: #1e7e34; /* Darker Green on hover */
            transform: scale(1.05);
        }

        #chatbot-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 450px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 999;
            transform: scale(0);
            transform-origin: bottom right;
            transition: transform 0.3s ease-in-out;
        }

        #chatbot-container.open {
            transform: scale(1);
        }

        .chat-header {
            background-color: #007bff;
            color: white;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
        }

        .chat-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #f4f7f9;
        }

        .chat-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #e9ecef;
        }

        .chat-input input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            margin-right: 10px;
            font-size: 0.95rem;
        }

        .chat-input button {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .chat-input button:hover {
            background-color: #0056b3;
        }

        .message {
            margin-bottom: 10px;
            max-width: 85%;
            padding: 10px 14px;
            border-radius: 15px;
            word-wrap: break-word;
            font-size: 0.95rem;
        }

        .user-message {
            align-self: flex-end;
            background-color: #007bff;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 3px;
        }

        .bot-message {
            align-self: flex-start;
            background-color: white;
            border: 1px solid #e9ecef;
            color: #343a40;
            margin-right: auto;
            border-bottom-left-radius: 3px;
        }

        .loading-dot {
            height: 10px;
            width: 10px;
            background-color: #6c757d;
            border-radius: 50%;
            display: inline-block;
            margin: 0 2px;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
    </style>
</head>
<body>

    <!-- 1. NAVIGATION BAR -->
    <header class="navbar">
        <div class="logo">Certify Automation</div>
        <nav>
            <a href="#problem">Problem</a>
            <a href="#solution">Solution</a>
            <a href="#features">Features</a>
        </nav>
        <button class="cta-button nav-cta">Book a Demo</button>
    </header>

    <!-- 2. HERO SECTION -->
    <section class="hero-section">
        <div class="hero-content">
            <h1>Eliminate Certificate Errors. Instantly Distribute Thousands of Certificates</h1>
            <p>Our AI-powered system automates generation, verifies participant data, and manages bulk delivery for EventEye's high-scale events.</p>
            <button class="cta-button hero-cta">See the Dashboard Live</button>
            <p class="small-text">Designed to integrate seamlessly with the EventEye platform.</p>
        </div>
        <div class="hero-visual">
            <!-- Placeholder for Dashboard Screenshot -->
            <div class="mockup-placeholder"></div>
        </div>
    </section>

    <!-- 3. PROBLEM STATEMENT -->
    <section id="problem" class="problem-section">
        <h2>The Challenge for EventEye</h2>
        <div class="challenge-card">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Distributing thousands of certificates quickly, accurately, and without errors is a major operational bottleneck.</h3>
            <p>Manual verification leads to errors, delays, and frustrated organizers/participants, especially after large-scale, popular events.</p>
        </div>
    </section>

    <!-- 4. SOLUTION & CORE FEATURES -->
    <section id="solution" class="solution-section">
        <h2>The Automated Solution</h2>

        <div class="feature-grid">
            <!-- Feature 1: Automated Generation (NOW A CLICKABLE LINK) -->
            <a href="upload15.html" class="feature-card">
                <i class="fas fa-file-pdf"></i>
                <h3>1. Personalized Generation</h3>
                <p>Generates high-quality, personalized certificates by merging participant data with customizable templates (Name, Event Details, Date, Organizer, etc.) automatically।</p>
            </a>

            <!-- Feature 2: AI Verification (NOW A CLICKABLE LINK) -->
            <a href="#ComingSoon" class="feature-card accent-card">
                <i class="fas fa-brain"></i>
                <h3>2. AI Verification Engine</h3>
                <p>Utilizes proprietary AI models to **verify spelling and formatting errors** in participant names and details, ensuring 99.9% accuracy before distribution।</p>
            </a>

            <!-- Feature 3: Bulk Delivery (NOW A CLICKABLE LINK) -->
            <a href="#ComingSoon" class="feature-card">
                <i class="fas fa-paper-plane"></i>
                <h3>3. Bulk Delivery (Email/WhatsApp)</h3>
                <p>Sends certificates via participant's preferred channels (Email/WhatsApp) in massive batches, optimized for high-volume delivery rates।</p>
            </a>
        </div>
    </section>

    <!-- 5. TRACKING DASHBOARD (KEY VISUAL) -->
    <section id="features" class="dashboard-section">
        <div class="dashboard-content">
            <h2>Live Tracking Dashboard for Organizers</h2>
            <p>Organizers gain full control and transparency with a centralized dashboard to monitor delivery status in real time।</p>
            <ul class="status-list">
                <li><i class="fas fa-check-circle delivered"></i> **Delivered:** Real-time confirmations।</li>
                <li><i class="fas fa-history pending"></i> **Pending:** Certificates scheduled for delivery।</li>
                <li><i class="fas fa-times-circle bounced"></i> **Bounced:** Automatic notification for failed deliveries (invalid emails)।</li>
            </ul>
        </div>
        <div class="dashboard-visual">
            <!-- Placeholder for Detailed Dashboard Mockup -->
            <div class="mockup-placeholder detail-view">[Detailed Mockup of Delivery Status Dashboard]</div>
        </div>
    </section>

    <!-- 6. FINAL CTA & FOOTER -->
    <footer class="footer">
        <div class="footer-cta-container">
            <h2>Ready to Scale Your Event Operations?</h2>
            <p>Integrate CertiVerify AI with EventEye and focus on your content, not your paperwork।</p>
            <button class="cta-button footer-cta">Contact Our Team</button>
        </div>
        <p class="copyright">&copy; 2024 CertiVerify AI. An Innovative Hackathon Solution।</p>
    </footer>

    <!-- CHATBOT UI -->
    <button id="chatbot-toggle" onclick="toggleChatbot()">
        <i class="fas fa-comments"></i>
    </button>

    <div id="chatbot-container">
        <div class="chat-header">CertiVerify AI Technical Support</div>
        <div class="chat-messages" id="chat-messages">
            <!-- Initial message injected by JS on load -->
        </div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Describe your issue or question..." onkeydown="if(event.key === 'Enter') sendMessage()">
            <button onclick="sendMessage()" id="send-button"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script type="module">
        // Firebase and LLM setup are placed here to be executed on load.
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        
        // --- ENVIRONMENT VARIABLES ---
        // Retrieving the API key from the environment securely.
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        // CRITICAL FIX: Ensure apiKey is a non-empty string for the API URL to be valid.
        const apiKey = firebaseConfig.apiKey || ""; 
        
        // Initialize Firebase app (required for API key injection in this environment)
        if (Object.keys(firebaseConfig).length > 0) {
            initializeApp(firebaseConfig);
            console.log("Firebase App Initialized।");
        } else {
            console.warn("Firebase config not found। Using default API key logic।");
        }

        // --- CHATBOT LOGIC ---
        const chatContainer = document.getElementById('chatbot-container');
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const LLM_MODEL = 'gemini-2.5-flash-preview-05-20';
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${LLM_MODEL}:generateContent?key=${apiKey}`;

        let isTyping = false;
        let chatHistory = []; 

        const systemPrompt = "You are 'CertiVerify AI Technical Support,' a friendly, empathetic, and highly competent troubleshooting assistant for the CertiVerify AI Certificate Automation System. Your sole purpose is to help users solve problems or understand features based on the landing page content. Reply in a step-by-step or guidance-based manner when a problem is presented. If the user asks a question, explain the feature (e.g., AI Verification) and its benefit (e.g., 99.9% accuracy). Be concise and helpful।";
        
        // Add initial bot message to history and UI
        function initializeChat() {
            const welcomeMessage = "Hello! I'm your Technical Support Assistant. How can I help you troubleshoot an issue, or tell you more about the Certificate Automation System features?";
            chatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });
            addMessage(welcomeMessage, 'bot');
        }

        function toggleChatbot() {
            chatContainer.classList.toggle('open');
            if (chatContainer.classList.contains('open')) {
                userInput.focus();
                if (chatHistory.length === 0) {
                    initializeChat();
                }
            }
        }

        window.toggleChatbot = toggleChatbot;

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.innerHTML = text.replace(/\n/g, '<br>');
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            if (isTyping) return;
            isTyping = true;
            sendButton.disabled = true;
            userInput.disabled = true;
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message typing-indicator';
            typingDiv.innerHTML = '<span class="loading-dot"></span><span class="loading-dot"></span><span class="loading-dot"></span>';
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            isTyping = false;
            sendButton.disabled = false;
            userInput.disabled = false;
            const typingDiv = chatMessages.querySelector('.typing-indicator');
            if (typingDiv) {
                typingDiv.remove();
            }
        }

        async function fetchLLMResponse(retryCount = 0) {
            if (!apiKey) {
                 return "Configuration Error: The API key required to connect to the AI model is currently missing or invalid. Please ensure the environment variables are correctly set।";
            }

            const payload = {
                contents: chatHistory,
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    // Implement exponential backoff for retries
                    if (response.status === 429 && retryCount < 3) {
                        const delay = Math.pow(2, retryCount) * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        return fetchLLMResponse(retryCount + 1);
                    }
                    // Handle non-retryable errors
                    throw new Error(`API call failed with status: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                return text || "I encountered an issue generating a response. Please rephrase your query।";

            } catch (error) {
                console.error("LLM API Error:", error);
                // Return a user-friendly error after all retries fail
                return "I'm experiencing connectivity issues with the AI support server. Please try again in a moment, or ask a simpler question।";
            }
        }

        async function sendMessage() {
            const message = userInput.value.trim();
            if (message === '' || isTyping) return;

            // 1. Display user message
            addMessage(message, 'user');
            userInput.value = '';
            
            // 2. Add user message to history
            chatHistory.push({ role: "user", parts: [{ text: message }] });

            // 3. Show typing indicator
            showTypingIndicator();

            // 4. Get LLM response
            const botResponse = await fetchLLMResponse();

            // 5. Hide typing indicator
            hideTypingIndicator();

            // 6. Display bot message
            addMessage(botResponse, 'bot');

            // 7. Add bot response to history (if it wasn't a configuration error)
            if (!botResponse.startsWith("Configuration Error:")) {
                chatHistory.push({ role: "model", parts: [{ text: botResponse }] });
            }
        }

        window.sendMessage = sendMessage;
        
        // --- Initialize chat history and UI on load ---
        initializeChat();

        // --- NAVIGATION LOGIC ---
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
